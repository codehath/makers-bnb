{% extends "base.html" %}

<h1>Approval Page</h1>

{% block content %}
<article>
    {% for booking in requests_dict %}
    Booking ID: {{request.id}}
    Space ID: {{request.space_id.id}}
    Space name: {{request.space_id.name}}
    Booking start date: {{request.start_date}}
    Booking end date: {{request.end_date}}
    Price per night: {{request.space_id.price}}
    {% endfor %}
    <p>other space not confirmed</p>
</article>
<form action="/confirm" method="post">
    <button id="confirm-button" type="submit">Confirm this booking</button>
</form>
<form action="/reject/{{booking_id}}" id="rejectForm" method="post">
    <input type="hidden" name="booking_id" value="">
    <button id="reject-button" type="submit">Reject this booking</button>
</form>

<script>
    // Get the number from the current URL
    const currentURL = window.location.href;
    const matchResult = currentURL.match(/\/(\d+)$/); // Matches the last digits in the URL
    const bookingNumber = matchResult ? matchResult[1] : null;

    // Set the value of the hidden input based on the number from the URL
    if (bookingNumber !== null) {
        document.getElementById('booking_id').value = bookingNumber;
    }

    // // Set the form action dynamically
    // const form = document.getElementById('rejectForm');
    // form.action = '/reject/' + bookingNumber; // Replace '/reject/' with your actual endpoint
</script>
</body>
{% endblock %}